<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { box-sizing: border-box; font-family: "Poppins", sans-serif; transition: background 0.3s, color 0.3s; }
    body {
      margin: 0; min-height: 100vh;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      display: flex; flex-direction: column; color: #fff;
    }
    body.light {
      background: #f5f7fb; color: #222;
    }

    header {
      background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
      padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    header h1 { margin: 0; font-size: 22px; font-weight: 600; }
    nav a {
      color: inherit; text-decoration: none; margin-left: 15px;
      padding: 6px 12px; border-radius: 6px; transition: 0.3s;
    }
    nav a.active, nav a:hover { background: rgba(255,255,255,0.2); }

    .container {
      flex: 1;
      display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px; padding: 20px;
    }
    .card {
      background: rgba(255,255,255,0.1); backdrop-filter: blur(15px);
      padding: 20px; border-radius: 16px; box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.4); }
    .card h3 { margin: 0; font-size: 18px; font-weight: 500; }
    .card p { margin: 15px 0 0; font-size: 32px; font-weight: bold; }

    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { padding: 10px; font-size: 14px; text-align: left; }
    th { background: rgba(255,255,255,0.15); }
    tr:nth-child(even) { background: rgba(255,255,255,0.05); }

    button {
      background: linear-gradient(135deg, #ff6b6b, #f06595); color: white; border: none;
      padding: 10px 16px; border-radius: 8px; cursor: pointer; margin-top: 10px;
      font-size: 14px; font-weight: 500; transition: 0.3s;
    }
    button:hover { background: linear-gradient(135deg, #f06595, #cc5de8); transform: scale(1.05); }

    .badge {
      display: inline-block; padding: 4px 10px; border-radius: 12px;
      font-size: 12px; font-weight: 600; margin: 4px 0;
    }
    .ok { background: #10b981; color: white; }
    .warn { background: #f59e0b; color: white; }
    .err { background: #ef4444; color: white; }
  </style>
</head>
<body>
  <header>
    <h1>Admin Panel</h1>
    <nav>
      <a href="home.html">üè† Home</a>
      <a href="#" class="active">üìä Dashboard</a>
      <button onclick="toggleTheme()">üåô Toggle Theme</button>
    </nav>
  </header>

  <main class="container">
    <div class="card"><h3>Active Users</h3><p id="activeUsers">0</p></div>
    <div class="card"><h3>Website Visits</h3><p id="visits">0</p></div>
    <div class="card"><h3>Flagged Cases</h3><p id="flaggedCases">0</p></div>
    <div class="card">
      <h3>Recent Logins</h3>
      <table id="loginTable"><thead><tr><th>User</th><th>Time</th></tr></thead><tbody></tbody></table>
    </div>
    <div class="card"><h3>Export Data</h3><button onclick="exportCSV()">‚¨áÔ∏è Export CSV</button></div>
    <div class="card"><h3>Visits Trend</h3><canvas id="visitsChart" height="150"></canvas></div>
    <div class="card"><h3>Users by Department</h3><canvas id="deptChart" height="150"></canvas></div>
    <div class="card">
      <h3>Notifications</h3>
      <ul id="notifications"></ul>
    </div>
    <div class="card">
      <h3>System Health</h3>
      <div><span class="badge ok">‚úÖ DB Connected</span></div>
      <div><span class="badge ok">‚úÖ API Online</span></div>
      <div><span class="badge warn">‚ö†Ô∏è High Memory Usage</span></div>
    </div>
  </main>

  <script>
    // --- Demo Data ---
    let activeUsers = Math.floor(Math.random() * 200) + 50; 
    let flaggedCases = Math.floor(Math.random() * 20) + 5;
    let visits = localStorage.getItem("siteVisits");
    if (!visits) { visits = 1; } else { visits = parseInt(visits) + 1; }
    localStorage.setItem("siteVisits", visits);

    document.getElementById("activeUsers").textContent = activeUsers;
    document.getElementById("visits").textContent = visits;
    document.getElementById("flaggedCases").textContent = flaggedCases;

    // Recent Logins
    const demoLogins = [
      {user: "Aisha", time: "2025-09-19 09:30"},
      {user: "Rahul", time: "2025-09-19 09:45"},
      {user: "Meera", time: "2025-09-19 10:00"},
      {user: "Sam", time: "2025-09-19 10:10"}
    ];
    const tbody = document.querySelector("#loginTable tbody");
    demoLogins.forEach(l => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${l.user}</td><td>${l.time}</td>`;
      tbody.appendChild(tr);
    });

    // Export CSV
    function exportCSV() {
      const rows = [
        ["Active Users", activeUsers],
        ["Website Visits", visits],
        ["Flagged Cases", flaggedCases]
      ];
      let csvContent = "data:text/csv;charset=utf-8," 
        + rows.map(e => e.join(",")).join("\n");
      const a = document.createElement("a");
      a.href = encodeURI(csvContent);
      a.download = "dashboard_data.csv";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    // Visits Trend Chart
    const ctx1 = document.getElementById("visitsChart");
    new Chart(ctx1, {
      type: "line",
      data: {
        labels: ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],
        datasets: [{ label: "Visits", data: [12,19,13,25,22,30,27], 
          borderColor: "#f06595", backgroundColor: "rgba(240,101,149,0.3)", fill:true }]
      }
    });

    // Department Pie Chart
    const ctx2 = document.getElementById("deptChart");
    new Chart(ctx2, {
      type: "pie",
      data: {
        labels: ["CS","Psychology","Engineering","Business","Arts"],
        datasets: [{ data: [50,30,20,15,25], backgroundColor:["#6366f1","#10b981","#f59e0b","#ef4444","#14b8a6"] }]
      }
    });

    // Notifications
    const notes = ["‚ö†Ô∏è New high-risk case flagged", "‚úÖ 5 interventions completed today", "üìä Dashboard data updated"];
    const ul = document.getElementById("notifications");
    notes.forEach(n => {
      const li = document.createElement("li");
      li.textContent = n; ul.appendChild(li);
    });

    // Dark/Light Mode Toggle
    function toggleTheme(){ document.body.classList.toggle("light"); }
  </script>
</body>
</html>
